"use strict";(self.webpackChunksocon_docs=self.webpackChunksocon_docs||[]).push([[7881],{5314:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>d});var i=s(4848),o=s(8453);const t={},r="SoCon Hub",a={id:"hub/index",title:"SoCon Hub",description:"Hubs play a central role in the SoCon ecosystem, forming a distributed network of servers designed to store and validate SoCon data. Here's an overview of the key concepts related to SoCon Hubs:",source:"@site/docs/hub/index.md",sourceDirName:"hub",slug:"/hub/",permalink:"/docs/hub/",draft:!1,unlisted:!1,editUrl:"https://github.com/Social-Continent/docs/tree/main/docs/hub/index.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"SoCon Accounts",permalink:"/docs/accounts"},next:{title:"SoCon Messages",permalink:"/docs/messages"}},c={},d=[{value:"What are Hubs?",id:"what-are-hubs",level:2},{value:"Hub Design",id:"hub-design",level:2},{value:"Validation and Storage",id:"validation-and-storage",level:2},{value:"Replication",id:"replication",level:2},{value:"Consistency",id:"consistency",level:2},{value:"Peer Scoring",id:"peer-scoring",level:2}];function l(e){const n={a:"a",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"socon-hub",children:"SoCon Hub"}),"\n",(0,i.jsx)(n.p,{children:"Hubs play a central role in the SoCon ecosystem, forming a distributed network of servers designed to store and validate SoCon data. Here's an overview of the key concepts related to SoCon Hubs:"}),"\n",(0,i.jsx)(n.h2,{id:"what-are-hubs",children:"What are Hubs?"}),"\n",(0,i.jsx)(n.p,{children:"Hubs are servers that run software to become part of the SoCon network. They store and validate both onchain Socon data from Ethereum and offchain Socon data from other Hubs. Each Hub maintains a copy of all Socon data, making it accessible through an API. Hubs serve as the gateway for reading and writing data to SoCon, and anyone building a SoCon app needs to interact with them."}),"\n",(0,i.jsx)(n.h2,{id:"hub-design",children:"Hub Design"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Syncing Data:"})," A Hub begins by syncing data from Socon contracts on the Optimism blockchain, becoming aware of every user's account and their associated keys."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Lifecycle of a SoCon Message:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Alice creates a new message (e.g., "Hello World!").'}),"\n",(0,i.jsx)(n.li,{children:"Alice or her app signs the message with an account key."}),"\n",(0,i.jsx)(n.li,{children:"Alice or her app uploads the message to a Hub."}),"\n",(0,i.jsx)(n.li,{children:"The Hub validates the message's signature and ensures it adheres to the specified message type requirements."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"hub architecture",src:s(1011).A+"",width:"2704",height:"1160"})}),"\n",(0,i.jsx)(n.h2,{id:"validation-and-storage",children:"Validation and Storage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Validation:"})," Messages are validated by checking for a valid signature from the account key and adherence to message type requirements, as outlined in the protocol spec."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Storage:"})," Messages are checked for conflicts before being stored. Conflicts may arise due to various reasons, such as an existing copy of the message or rent payment limitations. Conflicts are resolved deterministically and asynchronously using Conflict-Free Replicated Data Types (CRDTs)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"replication",children:"Replication"}),"\n",(0,i.jsx)(n.p,{children:"Hubs synchronize using a two-phase process:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gossip:"})," Hubs gossip messages to their peers immediately upon receiving and storing them, leveraging libp2p's gossipsub protocol."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Diff Sync:"})," Periodically, Hubs perform a diff sync with a random peer to identify dropped messages efficiently. The diff sync process compares merkle tries of message hashes."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"consistency",children:"Consistency"}),"\n",(0,i.jsx)(n.p,{children:"Hubs maintain strong eventual consistency. Even if a Hub is temporarily disconnected, it can safely recover when back online. However, messages may arrive out of order, a trade-off for ensuring robustness."}),"\n",(0,i.jsx)(n.h2,{id:"peer-scoring",children:"Peer Scoring"}),"\n",(0,i.jsx)(n.p,{children:"Hubs monitor the behavior of their peers and assign scores based on factors like message acceptance, falling behind, or excessive gossiping. Peers with unfavorable scores may be ignored by their peers."}),"\n",(0,i.jsxs)(n.p,{children:["Explore the detailed guide on ",(0,i.jsx)(n.a,{href:"#",children:"setting up and running a Hub"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},1011:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/hub-architecture-538bd87cb1153fd93c000f096102db80.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var i=s(6540);const o={},t=i.createContext(o);function r(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);