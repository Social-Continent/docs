"use strict";(self.webpackChunksocon_docs=self.webpackChunksocon_docs||[]).push([[9379],{7373:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>c,toc:()=>o});var r=s(4848),i=s(8453);const t={},d="Id Registry",c={id:"smart-contracts/id-registry",title:"Id Registry",description:"The IdRegistry smart contract serves as a decentralized identity (sid) registration system within the SoCon ecosystem. It allows users to register, transfer, and recover ownership of SoCon IDs securely. The contract employs the ERC2771 meta-transaction standard to enable relayer-supported transactions. Additionally, the contract implements an ownership transfer mechanism and recovery functionalities.",source:"@site/docs/smart-contracts/id-registry.md",sourceDirName:"smart-contracts",slug:"/smart-contracts/id-registry",permalink:"/smart-contracts/id-registry",draft:!1,unlisted:!1,editUrl:"https://github.com/Social-Continent/docs/tree/main/docs/smart-contracts/id-registry.md",tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Bundle Registry",permalink:"/smart-contracts/bundle-registry"},next:{title:"Name Registry",permalink:"/smart-contracts/name-registry"}},l={},o=[{value:"Functionalities",id:"functionalities",level:2},{value:"1. Registration",id:"1-registration",level:3},{value:"Function: <code>register</code>",id:"function-register",level:4},{value:"Function: <code>trustedRegister</code>",id:"function-trustedregister",level:4},{value:"2. Transfer",id:"2-transfer",level:3},{value:"Function: <code>transfer</code>",id:"function-transfer",level:4},{value:"Function: <code>_unsafeTransfer</code>",id:"function-_unsafetransfer",level:4},{value:"3. Recovery",id:"3-recovery",level:3},{value:"Function: <code>changeRecoveryAddress</code>",id:"function-changerecoveryaddress",level:4},{value:"Function: <code>requestRecovery</code>",id:"function-requestrecovery",level:4},{value:"Function: <code>completeRecovery</code>",id:"function-completerecovery",level:4},{value:"Function: <code>cancelRecovery</code>",id:"function-cancelrecovery",level:4},{value:"4. Owner Actions",id:"4-owner-actions",level:3},{value:"Function: <code>changeTrustedCaller</code>",id:"function-changetrustedcaller",level:4},{value:"Function: <code>disableTrustedOnly</code>",id:"function-disabletrustedonly",level:4},{value:"Function: <code>requestTransferOwnership</code>",id:"function-requesttransferownership",level:4},{value:"Function: <code>completeTransferOwnership</code>",id:"function-completetransferownership",level:4},{value:"Events",id:"events",level:2},{value:"Event: <code>Register</code>",id:"event-register",level:3},{value:"Event: <code>Transfer</code>",id:"event-transfer",level:3},{value:"Event: <code>ChangeHome</code>",id:"event-changehome",level:3},{value:"Event: <code>ChangeRecoveryAddress</code>",id:"event-changerecoveryaddress",level:3},{value:"Event: <code>RequestRecovery</code>",id:"event-requestrecovery",level:3},{value:"Event: <code>CancelRecovery</code>",id:"event-cancelrecovery",level:3},{value:"Event: <code>ChangeTrustedCaller</code>",id:"event-changetrustedcaller",level:3},{value:"Event: <code>DisableTrustedOnly</code>",id:"event-disabletrustedonly",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Usage",id:"usage",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"id-registry",children:"Id Registry"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"IdRegistry"})," smart contract serves as a decentralized identity (sid) registration system within the SoCon ecosystem. It allows users to register, transfer, and recover ownership of SoCon IDs securely. The contract employs the ERC2771 meta-transaction standard to enable relayer-supported transactions. Additionally, the contract implements an ownership transfer mechanism and recovery functionalities."]}),"\n",(0,r.jsx)(n.h2,{id:"functionalities",children:"Functionalities"}),"\n",(0,r.jsx)(n.h3,{id:"1-registration",children:"1. Registration"}),"\n",(0,r.jsxs)(n.h4,{id:"function-register",children:["Function: ",(0,r.jsx)(n.code,{children:"register"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Allows any user to register a new SoCon ID (sid) by providing their address, recovery address, and a home URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"to"}),": The address that will control the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"recovery"}),": The address that can recover the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"}),": The home URL for the sid's off-chain data."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-trustedregister",children:["Function: ",(0,r.jsx)(n.code,{children:"trustedRegister"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Allows the trusted caller (SoCon Invite Service) to register a new SoCon ID (sid) with the added capability of setting the home URL."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"to"}),": The address that will control the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"recovery"}),": The address that can recover the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"}),": The home URL for the sid's off-chain data."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-transfer",children:"2. Transfer"}),"\n",(0,r.jsxs)(n.h4,{id:"function-transfer",children:["Function: ",(0,r.jsx)(n.code,{children:"transfer"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Enables the owner of a SoCon ID to transfer ownership of the sid to another address."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"to"}),": The address to transfer the sid to."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-_unsafetransfer",children:["Function: ",(0,r.jsx)(n.code,{children:"_unsafeTransfer"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Internal function to perform an unsafe transfer of a SoCon ID to another address without checking invariants."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-recovery",children:"3. Recovery"}),"\n",(0,r.jsxs)(n.h4,{id:"function-changerecoveryaddress",children:["Function: ",(0,r.jsx)(n.code,{children:"changeRecoveryAddress"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Changes the recovery address associated with a SoCon ID."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"recovery"}),": The new address that can recover the sid."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-requestrecovery",children:["Function: ",(0,r.jsx)(n.code,{children:"requestRecovery"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Initiates a recovery request for a SoCon ID to a new address."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from"}),": The address that owns the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"to"}),": The destination address for the sid when the recovery is completed."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-completerecovery",children:["Function: ",(0,r.jsx)(n.code,{children:"completeRecovery"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Completes a recovery request and transfers ownership of the sid if the escrow period has passed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from"}),": The address that owns the sid."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-cancelrecovery",children:["Function: ",(0,r.jsx)(n.code,{children:"cancelRecovery"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Cancels an active recovery request."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from"}),": The address that owns the sid."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-owner-actions",children:"4. Owner Actions"}),"\n",(0,r.jsxs)(n.h4,{id:"function-changetrustedcaller",children:["Function: ",(0,r.jsx)(n.code,{children:"changeTrustedCaller"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Changes the trusted caller address, allowing the contract owner to manage trusted registrations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"_trustedCaller"}),": The address of the new trusted caller."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-disabletrustedonly",children:["Function: ",(0,r.jsx)(n.code,{children:"disableTrustedOnly"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Disables the trusted-only state, allowing anyone to register a SoCon ID."]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-requesttransferownership",children:["Function: ",(0,r.jsx)(n.code,{children:"requestTransferOwnership"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),' Begins a request to transfer ownership to a new address ("pendingOwner").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"newOwner"}),": The address to transfer ownership to."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h4,{id:"function-completetransferownership",children:["Function: ",(0,r.jsx)(n.code,{children:"completeTransferOwnership"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Completes a request to transfer ownership, updating the contract owner."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,r.jsxs)(n.h3,{id:"event-register",children:["Event: ",(0,r.jsx)(n.code,{children:"Register"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when a new SoCon ID is registered."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"to"}),": The address that owns the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": The sid that was registered."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"recovery"}),": The address that can initiate a recovery request for the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"}),": The home URL of the sid."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"event-transfer",children:["Event: ",(0,r.jsx)(n.code,{children:"Transfer"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when a SoCon ID is transferred to a new address."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from"}),": The address that previously owned the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"to"}),": The address that now owns the sid."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": The sid that was transferred."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"event-changehome",children:["Event: ",(0,r.jsx)(n.code,{children:"ChangeHome"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when a SoCon ID's home URL is updated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": The sid whose home URL was updated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"url"}),": The new home URL."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"event-changerecoveryaddress",children:["Event: ",(0,r.jsx)(n.code,{children:"ChangeRecoveryAddress"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when a SoCon ID's recovery address is updated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": The sid whose recovery address was updated."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"recovery"}),": The new recovery address."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"event-requestrecovery",children:["Event: ",(0,r.jsx)(n.code,{children:"RequestRecovery"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when a recovery request is initiated for a SoCon ID."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"from"}),": The address of the sid being recovered."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"to"}),": The destination address for the sid when the recovery is completed."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": The sid being recovered."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"event-cancelrecovery",children:["Event: ",(0,r.jsx)(n.code,{children:"CancelRecovery"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when a recovery request is cancelled."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"by"}),": The address that cancelled the recovery request."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"id"}),": The sid being recovered."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"event-changetrustedcaller",children:["Event: ",(0,r.jsx)(n.code,{children:"ChangeTrustedCaller"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when the trusted caller is modified."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"trustedCaller"}),": The address of the new trusted caller."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"event-disabletrustedonly",children:["Event: ",(0,r.jsx)(n.code,{children:"DisableTrustedOnly"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"})," Emitted when the trusted-only state is disabled."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ownership control is implemented using OpenZeppelin's ",(0,r.jsx)(n.code,{children:"Ownable"})," contract."]}),"\n",(0,r.jsx)(n.li,{children:"Access to critical functions is restricted based on ownership and trusted caller status."}),"\n",(0,r.jsx)(n.li,{children:"Recovery requests have an escrow period to prevent premature completion."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Deployment:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Deploy the ",(0,r.jsx)(n.code,{children:"IdRegistry.sol"})," contract"]}),"\n"]}),"\n"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var r=s(6540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);